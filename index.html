<html lang="en">
<head>
  <script src="math.js" type="text/javascript"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="main.css">
  <title>Document</title>
</head>
<body>

  <div class="welcome">
    <p>First to 5 wins!</p>
  </div>
  <div class="controls">
    <button class="new-game btn">New Game</button>
  </div>

  <div class="summary">
    <div class="selections">
      <br>
    </div>
  </div>

  <div class="game">
    <ul class="choices">
      <li class="choice" data-choice="rock">Rock</li>
      <li class="choice" data-choice="paper">Paper</li>
      <li class="choice" data-choice="scissors">Scissors</li>
    </ul>
  </div>

</body>

  <script>

    let computerPlay = () => {
      let randomNumber = math.randomInt(0,3);
      let computerThrow;

      if (randomNumber === 0) {
        computerThrow = 'rock';
      } else if (randomNumber === 1) {
        computerThrow = 'paper';
      } else {
        computerThrow = 'scissors';
      }

      return computerThrow;
    }

    let playerScore = 0;
    let computerScore = 0;
    const selections = document.querySelector('.selections');
    let compSelection = document.createElement('p');
    selections.appendChild(compSelection);

    const container = document.querySelector('.summary');
    const para = document.createElement('p');
    para.setAttribute('style', 'color: red;');
    para.textContent = `The score is ${playerScore} to ${computerScore}`;
    container.appendChild(para);

    let playerChoice = document.createElement('p');
    container.appendChild(playerChoice);

    let playRockPaperScissors = (e) => {
      //console.log(e);
      const choice = document.querySelector(`li[data-choice="${e.target.innerText.toLowerCase()}"]`);
      choice.classList.add('clicked');
      //console.log(choice);

      let playerSelection = e.target.innerText.toLowerCase();
      // console.log("playerSelection");
      // console.log(playerSelection);

      computerSelection = computerPlay();

      
      compSelection.textContent = `Computer chose ${computerSelection}`;
      playerChoice.textContent = `Player chose ${playerSelection}`;

      

      let result = '';

      if (playerSelection === computerSelection) {
        result = 'tie';
      } else if (playerSelection === 'rock' && computerSelection === 'scissors') {
        result = 'win';
      } else if (playerSelection === 'scissors' && computerSelection === 'paper') {
        result = 'win';
      } else if (playerSelection === 'paper' && computerSelection === 'rock') {
        result = 'win';
      } else {
        result = 'lose'
      }
      if (result === 'win') {
        playerScore++
      } else if (result === 'lose') {
        computerScore++
      }
      para.textContent = `The score is ${playerScore} to ${computerScore}`;
    }

    let newGame = (e) => {
      playerScore = 0;
      computerScore = 0;
      console.log('playing game');
      let gameButton = document.querySelector('button');
      gameButton.classList.add('clicked');
      para.textContent = `The score is ${playerScore} to ${computerScore}`;

        
      // }
      // alert(`The final score is ${playerScore} points for the player and ${computerScore} points for the computer`)
    }

    let removeTransition = function(e) {
    if (e.propertyName !== 'transform') return;
    e.target.classList.remove('clicked');
  }

    choices = Array.from(document.querySelectorAll('.choice'));
    choices.forEach(choice => choice.addEventListener('click', playRockPaperScissors));
    choices.forEach(choice => choice.addEventListener('transitionend', removeTransition));
    const button = document.querySelector('button');
    button.addEventListener('click', newGame);
    button.addEventListener('transitionend', removeTransition); 


  </script>
</html>